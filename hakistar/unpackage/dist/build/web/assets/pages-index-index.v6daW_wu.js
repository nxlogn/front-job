import{r as e,d as a,a as s,o as l,c as t,g as c,s as o,b as r,e as i,f as n,h as u,i as d,w as p,j as f,n as m,k as g,t as _,l as h,m as v,F as y,p as b,q as x,u as w,S as k,_ as C,v as F,x as j,y as B,z as G,A as N,B as V}from"./index-HfrO64ci.js";import{_ as z}from"./uni-icons.dq1dDhWq.js";import{_ as O}from"./uni-search-bar.DPACRxvY.js";import{g as T}from"./index.qscmTMIl.js";const Z=V(a({__name:"index",setup(a){const V=s(null);l((()=>{V.value={top:0,height:44},E(),P(),q(),S(1)}));const Z=t((()=>{let e={height:"200px"};return e={height:"90px"},e})),$=t((()=>{let e={top:"0",height:"44px"};return e={top:"20px",height:"50px"},e})),A=s(""),E=()=>{console.log("开始定位"),c({type:"wgs84",geocode:!0,success(a){var s,l;console.log("获取地理位置成功"),console.log("经度是",a.longitude),console.log("纬度是",a.latitude),(s=a.longitude,l=a.latitude,new Promise(((a,t)=>{"number"==typeof s&&"number"==typeof l?e({url:"https://restapi.amap.com/v3/geocode/regeo",data:{key:"5bae6b196907f97857fdc699d03e23a9",location:`${s},${l}`},success(e){console.log("高德api接口返回",e);const s=e.data;if("1"!==s.status)return void t("高德api错误");const l=s.regeocode.addressComponent.city.length?s.regeocode.addressComponent.city:s.regeocode.addressComponent.province;a(l)},fail(e){t(`请求失败:${e.errMsg}`)}}):t("经纬度必须为数字")}))).then((e=>{A.value=e})).catch((()=>{A.value="无法定位"}))},fail(){A.value="无法获取位置",console.log("获取地理位置失败"),o({title:"提示",content:"需要获取您的位置信息，是否去设置开启定位权限",success(e){e.confirm&&setTimeout((()=>{o({title:"提示",content:"请在浏览器设置中允许定位权限，并重新定位",showCancel:!1})}),300)}})}})},I=s([]),P=async()=>{try{const e=await T("/home/banner");I.value=e.banner}catch(e){console.error(e)}},U=s([]),q=async()=>{try{const e=await T("/home/part");U.value=e.part}catch(e){console.error(e)}},H=s([]),L=s(1),M=s(0),S=async e=>{try{const a=await T("/home/merchants",{page:e});H.value=1===e?a.list:[...H.value,...a.list],M.value=a.pagination.totalPages,L.value=a.pagination.current}catch(a){console.error("获取失败")}};return r((()=>{L.value<M.value&&S(L.value+1)})),(e,a)=>{const s=b,l=i(n("uni-icons"),z),t=x,c=i(n("uni-search-bar"),O),o=w,r=N,V=k,T=i(n("up-scroll-list"),C),P=i(n("up-box"),F),q=i(n("up-rate"),j),L=i(n("up-divider"),B);return u(),d(s,{class:"container"},{default:p((()=>[f(s,{class:"header",style:m(Z.value)},{default:p((()=>[f(s,{class:"status-bar"}),f(s,{class:"nav-content",style:m($.value)},{default:p((()=>[f(s,{class:"location",onClick:E},{default:p((()=>[f(l,{type:"location",size:"28",color:"#fff"}),f(t,{class:"city"},{default:p((()=>[g(_(A.value),1)])),_:1})])),_:1}),f(s,{class:"search-box"},{default:p((()=>[f(c,{radius:"100",placeholder:"搜索宠物服务",clearButton:"none",cancelButton:"none",style:{width:"100%"}})])),_:1})])),_:1},8,["style"])])),_:1},8,["style"]),f(s,{class:"content"},{default:p((()=>[f(V,{class:"banner-swiper","indicator-dots":"",autoplay:"",circular:"","indicator-color":"rgb(255,255,255,0.6)","indicator-active-color":"#fff"},{default:p((()=>[(u(!0),h(y,null,v(I.value,(e=>(u(),d(r,{key:e.title},{default:p((()=>[f(s,{class:"swiper-item-content"},{default:p((()=>[f(o,{src:e.url,mode:"aspectFill"},null,8,["src"])])),_:2},1024)])),_:2},1024)))),128))])),_:1}),f(s,{class:"part"},{default:p((()=>[f(T,{indicatorColor:"#fff0f0",indicatorActiveColor:"#ffce2c"},{default:p((()=>[(u(!0),h(y,null,v(U.value,(e=>(u(),d(s,{class:"scroll-item",key:e.title,onClick:a=>{return s=e.title,void G({url:"/packageB/merchant/merchant?keyword="+s});var s}},{default:p((()=>[f(o,{class:"scroll-image",src:e.url,mode:"aspectFill"},null,8,["src"]),f(t,{class:"item-title"},{default:p((()=>[g(_(e.title),1)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1})])),_:1}),f(s,{class:"part"},{default:p((()=>[f(s,{class:"p-4 bg-white"},{default:p((()=>[f(P,{height:"180px",gap:"12px"},{left:p((()=>[f(o,{class:"box-image",src:"/assets/pic1-BdmeWTZI.png",mode:"aspectFill"})])),rightTop:p((()=>[f(o,{class:"box-image",src:"/assets/pic2-CHEN-sNz.png",mode:"aspectFill"})])),rightBottom:p((()=>[f(o,{class:"box-image",src:"/assets/pic3-CGox5YfN.png",mode:"aspectFill"})])),_:1})])),_:1})])),_:1}),f(s,{class:"exchange-section"},{default:p((()=>[f(s,{class:"section-title-area"},{default:p((()=>[f(t,{class:"section-title"},{default:p((()=>[g("省钱速报")])),_:1}),f(t,{class:"section-subtitle"},{default:p((()=>[g("折扣促销每日更新")])),_:1}),f(s,{class:"go-btn"},{default:p((()=>[g("GO")])),_:1})])),_:1}),f(s,{class:"promo-cards"},{default:p((()=>[f(s,{class:"promo-card"},{default:p((()=>[f(o,{class:"img-placeholder",src:"/assets/pic4-Bff3ZrmZ.jpg",mode:"aspectFill"}),f(t,{class:"promo-title"},{default:p((()=>[g("到店服务")])),_:1}),f(t,{class:"promo-desc"},{default:p((()=>[g("限时降价")])),_:1}),f(s,{class:"samll-go"},{default:p((()=>[g("GO")])),_:1})])),_:1}),f(s,{class:"promo-card"},{default:p((()=>[f(o,{class:"img-placeholder",src:"/assets/pic5-1utEtLaN.jpg",mode:"aspectFill"}),f(t,{class:"promo-title"},{default:p((()=>[g("领券中心")])),_:1}),f(t,{class:"promo-desc"},{default:p((()=>[g("618立减")])),_:1}),f(s,{class:"samll-go"},{default:p((()=>[g("GO")])),_:1})])),_:1})])),_:1})])),_:1}),(u(!0),h(y,null,v(H.value,(e=>(u(),d(s,{class:"service-card",key:e.merchant_id},{default:p((()=>[f(o,{class:"service-img",mode:"aspectFill",src:e.pic},null,8,["src"]),f(s,{class:"service-info"},{default:p((()=>[f(t,{class:"service-name"},{default:p((()=>[g(_(e.merchant_name),1)])),_:2},1024),f(s,{class:"rate-area"},{default:p((()=>[f(q,{modelValue:e.rating,"onUpdate:modelValue":a=>e.rating=a,readonly:"","inactive-color":"#b2b2b2","active-color":"#ffce2c"},null,8,["modelValue","onUpdate:modelValue"]),f(t,{class:"rate-text"},{default:p((()=>[g(_(e.rating),1)])),_:2},1024)])),_:2},1024),f(t,{class:"service-detail"},{default:p((()=>[g(_(e.address),1)])),_:2},1024),f(s,{class:"tag-area"},{default:p((()=>[(u(!0),h(y,null,v(e.service.split(","),(e=>(u(),d(s,{class:"tag-item",key:e},{default:p((()=>[g(_(e),1)])),_:2},1024)))),128))])),_:2},1024),f(s,{class:"price-area"},{default:p((()=>[f(s,null,{default:p((()=>[g("惠")])),_:1}),g("【新客福利】"),f(t,null,{default:p((()=>[g("￥19.9")])),_:1}),g("代金券可领 ")])),_:1})])),_:2},1024)])),_:2},1024)))),128)),f(L,{text:"我是有底线的"})])),_:1})])),_:1})}}}),[["__scopeId","data-v-9cd0db07"]]);export{Z as default};
