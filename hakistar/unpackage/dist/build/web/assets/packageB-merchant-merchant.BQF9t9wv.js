import{d as a,a5 as e,o as l,a as s,b as t,e as n,f as o,h as r,l as c,j as u,w as d,k as i,F as m,m as f,ab as p,p as v,q as _,H as w,ac as h,x as k,y as g,a8 as y,i as x,t as b,z as C,u as V,B}from"./index-HfrO64ci.js";import{g as z}from"./index.qscmTMIl.js";const N=B(a({__name:"merchant",setup(a){const B=e([{name:"推荐"},{name:"寄养"},{name:"摄影"},{name:"美容"},{name:"洗澡"},{name:"接送"},{name:"疫苗"},{name:"训练"}]);l((a=>{console.log(111,a.keyword);const e=B.findIndex((e=>a.keyword.includes(e.name)));console.log(555,e),N.value=-1===e?0:e,U.keyword=-1===e?"":B[e].name,S(1)}));const N=s(0),U=e({keyword:"",merchantName:"",sortBy:""}),j=(a,e)=>{A.value="",U.merchantName="",U.keyword=0===e?"":a.name,S(1)},I=s([]),F=s(1),P=s(0),S=async a=>{try{const e=await z("/home/merchants",{page:a,...U});I.value=1===a?e.list:[...I.value,...e.list],P.value=e.pagination.totalPages,F.value=e.pagination.current}catch(e){console.error("获取失败")}};t((()=>{F.value<P.value&&S(F.value+1)}));const q=s(!1),H=s(null),J=e([["默认","由低到高","由高到低"]]),O=a=>{q.value=!0,H.value.setIndexs([0])},R=()=>{q.value=!1},$=a=>{"默认"===a.value[0]?U.sortBy="":"由高到低"===a.value[0]?U.sortBy="rating":"由低到高"===a.value[0]&&(U.sortBy="rating_asc"),S(1),R()},A=s(""),D=()=>{U.merchantName=A.value,U.keyword="",N.value=0,S(1)};return(a,e)=>{const l=n(o("up-search"),p),s=v,t=_,z=n(o("up-icon"),w),U=n(o("up-tabs"),h),F=V,P=n(o("up-rate"),k),S=n(o("up-divider"),g),E=n(o("up-picker"),y);return r(),c(m,null,[u(s,{class:"merchant-page"},{default:d((()=>[u(s,{class:"search-header"},{default:d((()=>[u(l,{placeholder:"搜索商家",modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=a=>A.value=a),onSearch:D,clearabled:!1},null,8,["modelValue"])])),_:1}),u(s,{class:"merchant"},{default:d((()=>[u(s,{class:"custom-dropdown"},{default:d((()=>[u(s,{class:"dropdown-header"},{default:d((()=>[u(s,{class:"dropdown-item",onClick:e[1]||(e[1]=a=>O())},{default:d((()=>[u(t,{class:"dropdown-text"},{default:d((()=>[i("距离")])),_:1}),u(z,{name:"arrow-down",size:"16",color:"#999"})])),_:1}),u(s,{class:"dropdown-item",onClick:e[2]||(e[2]=a=>O())},{default:d((()=>[u(t,{class:"dropdown-text"},{default:d((()=>[i("好评")])),_:1}),u(z,{name:"arrow-down",size:"16",color:"#999"})])),_:1}),u(s,{class:"dropdown-item",onClick:e[3]||(e[3]=a=>O())},{default:d((()=>[u(t,{class:"dropdown-text"},{default:d((()=>[i("价格")])),_:1}),u(z,{name:"arrow-down",size:"16",color:"#999"})])),_:1})])),_:1})])),_:1})])),_:1}),u(s,{class:"tabs"},{default:d((()=>[u(U,{list:B,current:N.value,"onUpdate:current":e[4]||(e[4]=a=>N.value=a),onClick:j},null,8,["list","current"])])),_:1}),(r(!0),c(m,null,f(I.value,(a=>(r(),x(s,{class:"service-card",key:a.merchant_id,onClick:e=>(a=>{C({url:`/packageB/merchant-detail/merchant-detail?info=${JSON.stringify(a)}`})})(a)},{default:d((()=>[u(F,{class:"service-img",mode:"aspectFill",src:a.pic},null,8,["src"]),u(s,{class:"service-info"},{default:d((()=>[u(t,{class:"service-name"},{default:d((()=>[i(b(a.merchant_name),1)])),_:2},1024),u(s,{class:"rate-area"},{default:d((()=>[u(P,{modelValue:a.rating,"onUpdate:modelValue":e=>a.rating=e,readonly:"","inactive-color":"#b2b2b2","active-color":"#ffce2c"},null,8,["modelValue","onUpdate:modelValue"]),u(t,{class:"rate-text"},{default:d((()=>[i(b(a.rating),1)])),_:2},1024)])),_:2},1024),u(t,{class:"service-detail"},{default:d((()=>[i(b(a.address),1)])),_:2},1024),u(s,{class:"tag-area"},{default:d((()=>[(r(!0),c(m,null,f(a.service.split(","),(a=>(r(),x(s,{class:"tag-item",key:a},{default:d((()=>[i(b(a),1)])),_:2},1024)))),128))])),_:2},1024),u(s,{class:"price-area"},{default:d((()=>[u(s,null,{default:d((()=>[i("惠")])),_:1}),i("【新客福利】"),u(t,null,{default:d((()=>[i("￥19.9")])),_:1}),i("代金券可领 ")])),_:1})])),_:2},1024)])),_:2},1032,["onClick"])))),128)),u(S,{text:"我是有底线的"})])),_:1}),u(E,{ref_key:"uPickerRef",ref:H,show:q.value,columns:J,onCancel:R,onConfirm:$},null,8,["show","columns"])],64)}}}),[["__scopeId","data-v-c43339ae"]]);export{N as default};
