{"version":3,"file":"interceptors.js","sources":["utils/http/interceptors.ts"],"sourcesContent":["import {RequestConfig} from \"./types\"\r\n\r\nconst getToken = () => uni.getStorageSync(\"token\") || \"\"\r\n\r\n//请求拦截器\r\nexport const requestInterceptor=(config:RequestConfig)=>{\r\n\tconst token = getToken()\r\n\tif(token){\r\n\t\tconfig.header={\r\n\t\t\t...config.header,\r\n\t\t\tAuthorization:`Bearer ${token}`\r\n\t\t}\r\n\t}\r\n\treturn config\r\n}\r\n\r\n/*\r\n{\r\n\tcode:200,\r\n\tmessage:\"请求成功\",\r\n\tsuccess:true\r\n\tdata:数据\r\n}\r\n*/\r\n\r\n//响应拦截器\r\nexport const transformResponse=(res:any)=>{\r\n\tif(res.statusCode !==200) { \r\n\t\tuni.showToast({\r\n\t\t\ttitle:res.data.message,\r\n\t\t\ticon:\"none\"\r\n\t\t})\r\n\t\treturn \r\n\t}\r\n\tif(!res.data.success) {\r\n\t\tuni.showToast({\r\n\t\t\ttitle:res.data.message,\r\n\t\t\ticon:\"none\"\r\n\t\t})\r\n\t}\r\n\treturn res.data.data\r\n}"],"names":["uni"],"mappings":";;AAEA,MAAM,WAAW,MAAMA,cAAI,MAAA,eAAe,OAAO,KAAK;AAGzC,MAAA,qBAAmB,CAAC,WAAuB;AACvD,QAAM,QAAQ;AACd,MAAG,OAAM;AACR,WAAO,SAAO;AAAA,MACb,GAAG,OAAO;AAAA,MACV,eAAc,UAAU,KAAK;AAAA,IAAA;AAAA,EAE/B;AACO,SAAA;AACR;AAYa,MAAA,oBAAkB,CAAC,QAAU;AACtC,MAAA,IAAI,eAAc,KAAK;AACzBA,kBAAAA,MAAI,UAAU;AAAA,MACb,OAAM,IAAI,KAAK;AAAA,MACf,MAAK;AAAA,IAAA,CACL;AACD;AAAA,EACD;AACG,MAAA,CAAC,IAAI,KAAK,SAAS;AACrBA,kBAAAA,MAAI,UAAU;AAAA,MACb,OAAM,IAAI,KAAK;AAAA,MACf,MAAK;AAAA,IAAA,CACL;AAAA,EACF;AACA,SAAO,IAAI,KAAK;AACjB;;;"}