{"version":3,"file":"merchant.js","sources":["packageB/merchant/merchant.vue","../../../softawres/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFja2FnZUJcbWVyY2hhbnRcbWVyY2hhbnQudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"merchant-page\">\r\n\t\t<view class=\"search-header\">\r\n\t\t\t<up-search placeholder=\"搜索商家\" v-model=\"searchWord\" @search=\"handleSearch\" :clearabled=\"false\"></up-search>\r\n\t\t</view>\r\n\t\t<view class=\"merchant\">\r\n\t\t\t<view class=\"custom-dropdown\">\r\n\t\t\t\t<view class=\"dropdown-header\">\r\n\t\t\t\t\t<view class=\"dropdown-item\" @click=\"changeSort(0)\">\r\n\t\t\t\t\t\t<text class=\"dropdown-text\">距离</text>\r\n\t\t\t\t\t\t<up-icon name=\"arrow-down\" size=\"16\" color=\"#999\"></up-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"dropdown-item\" @click=\"changeSort(1)\">\r\n\t\t\t\t\t\t<text class=\"dropdown-text\">好评</text>\r\n\t\t\t\t\t\t<up-icon name=\"arrow-down\" size=\"16\" color=\"#999\"></up-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"dropdown-item\" @click=\"changeSort(2)\">\r\n\t\t\t\t\t\t<text class=\"dropdown-text\">价格</text>\r\n\t\t\t\t\t\t<up-icon name=\"arrow-down\" size=\"16\" color=\"#999\"></up-icon>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<view class=\"tabs\">\r\n\t\t\t  <up-tabs :list=\"list1\" v-model:current=\"currentIndex\" @click=\"handleSelect\"></up-tabs>\r\n\t\t</view>\r\n\t\t<view class=\"service-card\" v-for=\"item in merchanList\" :key=\"item.merchant_id\" @click=\"goDetail(item)\">\r\n\t\t\t<image class=\"service-img\" mode=\"aspectFill\" :src=\"item.pic\"></image>\r\n\t\t\t<view class=\"service-info\">\r\n\t\t\t\t<text class=\"service-name\">{{item.merchant_name}}</text>\r\n\t\t\t\t<view class=\"rate-area\">\r\n\t\t\t\t\t<up-rate v-model=\"item.rating\" readonly  inactive-color=\"#b2b2b2\" active-color=\"#ffce2c\"></up-rate>\r\n\t\t\t\t\t<text class=\"rate-text\">{{item.rating}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"service-detail\">{{item.address}}</text>\r\n\t\t\t\t<view class=\"tag-area\">\r\n\t\t\t\t\t<view class=\"tag-item\" v-for=\"tag in item.service.split(',')\" :key=\"tag\">{{tag}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"price-area\">\r\n\t\t\t\t\t<view>惠</view>【新客福利】<text>￥19.9</text>代金券可领\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<up-divider text=\"我是有底线的\"></up-divider>\r\n\t</view>\r\n\t<up-picker ref=\"uPickerRef\" :show=\"show\" :columns=\"columns\" @cancel=\"close\" @confirm=\"confirm\"></up-picker>\r\n</template>\r\n<script lang=\"ts\" setup>\r\n\timport { reactive,ref } from 'vue';  \r\n\timport { get } from '../../utils/http';\r\n\timport {onReachBottom,onLoad} from \"@dcloudio/uni-app\"\r\n\tinterface MerchantItem{\r\n\t\tmerchant_id:number;\r\n\t\taddress:string;\r\n\t\tbusiness_hours:string;\r\n\t\tmerchant_name:string;\r\n\t\tphone:string;\r\n\t\tpic:string;\r\n\t\trating:string;\r\n\t\tservice:string\r\n\t}\r\n\tinterface MerchantListParams{\r\n\t\tkeyword:string;\r\n\t\tmerchantName:string;\r\n\t\tsortBy:\"rating\" | \"rating_asc\" | \"\"\r\n\t}\r\n\tconst list1 = reactive([  \r\n\t    { name: '推荐' },  \r\n\t    { name: '寄养' },  \r\n\t    { name: '摄影' },  \r\n\t    { name: '美容' },  \r\n\t    { name: '洗澡' },  \r\n\t    { name: '接送' },  \r\n\t    { name: '疫苗' },  \r\n\t    { name: '训练' }  \r\n\t]);  \r\n\t//商家列表\r\n\tonLoad((options)=>{\r\n\t\tuni.__f__('log','at packageB/merchant/merchant.vue:79',111,options.keyword)\r\n\t\tconst index:number=list1.findIndex(item=>options.keyword.includes(item.name));\r\n\t\tuni.__f__('log','at packageB/merchant/merchant.vue:81',555,index)\r\n\t\tcurrentIndex.value=index===-1?0:index\r\n\t\tparams.keyword=index===-1?\"\":list1[index].name\r\n\t\tgetMerchanList(1)\r\n\t})\r\n\t\r\n\t//页签切换\r\n\tconst currentIndex=ref<number>(0)\r\n\t\r\n\t//筛选参数\r\n\tconst params=reactive<MerchantListParams>({\r\n\t\tkeyword:\"\",\r\n\t\tmerchantName:\"\",\r\n\t\tsortBy:\"\"\r\n\t})\r\n\t\r\n\tconst handleSelect=(item,index)=>{\r\n\t\tsearchWord.value=\"\"\r\n\t\tparams.merchantName=\"\"\r\n\t\tif(index===0){\r\n\t\t\tparams.keyword=\"\"\r\n\t\t}else{\r\n\t\t\tparams.keyword=item.name\r\n\t\t}\r\n\t\tgetMerchanList(1)\r\n\t}\r\n\t\r\n\tconst merchanList=ref<MerchantItem[]>([])\r\n\tconst currentPage=ref<number>(1)\r\n\tconst totalPages=ref<number>(0)\r\n\tconst getMerchanList=async (page:number)=>{\r\n\t\ttry {\r\n\t\t\tconst data:any=await get(\"/home/merchants\",{page,...params});\r\n\t\t\tif(page===1){\r\n\t\t\t\tmerchanList.value=data.list\r\n\t\t\t}else{\r\n\t\t\t\tmerchanList.value=[...merchanList.value,...data.list]\r\n\t\t\t}\r\n\t\t\ttotalPages.value=data.pagination.totalPages\r\n\t\t\tcurrentPage.value=data.pagination.current\r\n\t\t} catch (error) {\r\n\t\t\tuni.__f__('error','at packageB/merchant/merchant.vue:122',\"获取失败\")\r\n\t\t}\t\r\n\t}\r\n\tonReachBottom(()=>{\r\n\t\tif(currentPage.value<totalPages.value){\r\n\t\t\tgetMerchanList(currentPage.value+1)\r\n\t\t}\r\n\t})\r\n\t\r\n\tconst show = ref<boolean>(false);\r\n\tconst uPickerRef=ref(null)\r\n\tconst columns = reactive([\r\n\t  ['默认', '由低到高', '由高到低']\r\n\t]);\r\n\tconst changeSort=(index:number)=>{\r\n\t\tshow.value=true;\r\n\t\tuPickerRef.value.setIndexs([0])\r\n\t}\r\n\tconst close=()=>{\r\n\t\tshow.value=false\r\n\t}\r\n\tconst confirm=(e)=>{\r\n\t\tif(e.value[0]===\"默认\"){\r\n\t\t\tparams.sortBy=\"\"\r\n\t\t}else if(e.value[0]===\"由高到低\"){\r\n\t\t\tparams.sortBy=\"rating\"\r\n\t\t}else if(e.value[0]===\"由低到高\"){\r\n\t\t\tparams.sortBy=\"rating_asc\"\r\n\t\t}\r\n\t\tgetMerchanList(1)\r\n\t\tclose()\r\n\t}\r\n\tconst searchWord=ref<string>(\"\")\r\n\tconst handleSearch=()=>{\r\n\t\tparams.merchantName=searchWord.value;\r\n\t\tparams.keyword=\"\"\r\n\t\tcurrentIndex.value=0;\r\n\t\tgetMerchanList(1)\r\n\t}\r\n\tconst goDetail=(item:MerchantItem)=>{\r\n\t\tuni.navigateTo({\r\n\t\t\turl:`/packageB/merchant-detail/merchant-detail?info=${JSON.stringify(item)}`\r\n\t\t})\r\n\t}\r\n\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\t.merchant-page{\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\t.search-header{\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 30rpx;\r\n\t\t}\r\n\t\t.merchant{\r\n\t\t\twidth: 100%;\r\n\t\t\t.custom-dropdown{\r\n\t\t\t\tbackground-color: #fff;\r\n\t\t\t\t.dropdown-header{\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tborder-bottom: 1rpx solid #f0f0f0;\r\n\t\t\t\t}\r\n\t\t\t\t.dropdown-item{\r\n\t\t\t\t\tflex: 1;\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tjustify-content: center;\r\n\t\t\t\t\tpadding: 30rpx 20rpx;\r\n\t\t\t\t\t.dropdown-text{\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t.tabs{\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 30rpx;\r\n\t\t}\r\n\t}\r\n\t\r\n\t.service-card{\r\n\t\tdisplay: flex;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 16rpx;\r\n\t\tmargin: 10rpx 0 10rpx 0;\r\n\t\tpadding: 20rpx;\r\n\t\t.service-img{\r\n\t\t\twidth: 160rpx;\r\n\t\t\theight: 160rpx;\r\n\t\t\tbackground-color: #ddd;\r\n\t\t\tborder-radius: 8rpx;\r\n\t\t\tmargin-right: 20rpx;\r\n\t\t\tmargin-top: 8rpx;\r\n\t\t}\r\n\t\t.service-info{\r\n\t\t\tflex: 1;\r\n\t\t\t.service-name{\r\n\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #000;\r\n\t\t\t\tline-height:44rpx;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-bottom: 8rpx;\r\n\t\t\t}\r\n\t\t\t.rate-area{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 8rpx;\r\n\t\t\t\t.rate-text{\r\n\t\t\t\t\tcolor: $uni-color-primary;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tmargin-left: 10rpx;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t\t.service-detail{\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t\tline-height: 34rpx;\r\n\t\t\t\tdisplay: block;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t}\r\n\t\t\t.tag-area{\r\n\t\t\t\tdisplay:flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin: 12rpx 0;\r\n\t\t\t\t.tag-item{\r\n\t\t\t\t\tfont-size: 18rpx;\r\n\t\t\t\t\tpadding: 4rpx 14rpx;\r\n\t\t\t\t\tborder-radius: 20rpx;\r\n\t\t\t\t\tmargin-right: 16rpx;\r\n\t\t\t\t\tborder:1px solid;\r\n\t\t\t\t\t&:nth-child(1){\r\n\t\t\t\t\t\tcolor: #ff6b81;\r\n\t\t\t\t\t\tborder-color: #ff6b81;\r\n\t\t\t\t\t\tbackground-color: rgba(255, 107, 129, 0.1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t&:nth-child(2){\r\n\t\t\t\t\t\tcolor: #ffce2c;\r\n\t\t\t\t\t\tborder-color: #ffce2c;\r\n\t\t\t\t\t\tbackground-color: rgba(255, 206, 44, 0.1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t&:nth-child(3){\r\n\t\t\t\t\t\tcolor: #19be6b;\r\n\t\t\t\t\t\tborder-color: #19be6b;\r\n\t\t\t\t\t\tbackground-color: rgba(25, 190, 107, 0.1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t&:nth-child(4){\r\n\t\t\t\t\t\tcolor: #ff9900;\r\n\t\t\t\t\t\tborder-color: #ff9900;\r\n\t\t\t\t\t\tbackground-color: rgba(255, 153, 0, 0.1);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t&:last-child{\r\n\t\t\t\t\t\tmargin-right: 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.price-area{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-top: 16rpx;\r\n\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\tcolor:#666;\r\n\t\t\t\tview{\r\n\t\t\t\t\tbackground-color: $uni-color-primary;\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tfont-size: 20rpx;\r\n\t\t\t\t\tpadding: 2rpx 8rpx;\r\n\t\t\t\t\tborder-radius: 4rpx;\r\n\t\t\t\t\tmargin-right: 8rpx;\r\n\t\t\t\t}\r\n\t\t\t\ttext{\r\n\t\t\t\t\tcolor: #ff6b81;\r\n\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\tmargin: 0 4rpx;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/project/hakistar/hakistar/packageB/merchant/merchant.vue'\nwx.createPage(MiniProgramPage)"],"names":["reactive","onLoad","uni","ref","get","onReachBottom"],"mappings":"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"}