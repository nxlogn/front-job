{"version":3,"names":["menuButtonInfo","common_vendor","ref","onLoad","value","index","getMenuButtonBoundingClientRect","startLocation","getBannerList","headerStyle","computed","style","height","concat","top","navStyle","cityName","__f__","getLocation","type","geocode","success","res","longitude","latitude","utils_getcode","reverseCode","then","res2","catch","fail","showModal","title","content","confirm","openSetting","settings","_ref","_asyncToGenerator2","_regeneratorRuntime2","mark","_callee","data","wrap","_callee$","_context","prev","next","utils_http_index","get","sent","stop","apply","arguments","wx","createPage","MiniProgramPage"],"sources":["index.vue","cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"header\" :style=\"headerStyle\">\r\n\t\t\t<view class=\"status-bar\" ></view>\r\n\t\t\t<view class=\"nav-content\" :style=\"navStyle\">\r\n\t\t\t\t<view class=\"location\" @click=\"startLocation\">\r\n\t\t\t\t\t<uni-icons type=\"location\" size=\"28\" color=\"#fff\"></uni-icons>\r\n\t\t\t\t\t<text class=\"city\">{{cityName}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"search-box\">\r\n\t\t\t\t\t<uni-search-bar \r\n\t\t\t\t\t\tradius=\"100\" \r\n\t\t\t\t\t\tplaceholder=\"搜索宠物服务\" \r\n\t\t\t\t\t\tclearButton=\"none\" \r\n\t\t\t\t\t\tcancelButton=\"none\"\r\n\t\t\t\t\t\tstyle=\"width: 100%;\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t</uni-search-bar>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script setup lang=\"ts\">  \r\nimport {onLoad} from \"@dcloudio/uni-app\"\r\nimport {ref,computed} from \"vue\"\r\nimport { reverseCode } from \"../../utils/getcode\"\r\nimport { get } from \"../../utils/http\"\r\nconst menuButtonInfo=ref<any>(null)\r\nonLoad(()=>{\r\n\r\n\tmenuButtonInfo.value=uni.getMenuButtonBoundingClientRect();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\tstartLocation()\r\n\tgetBannerList()\r\n})\r\n\r\nconst headerStyle=computed(()=>{\r\n\tlet style={\r\n\t\theight:\"200px\"\r\n\t}\r\n\r\n\tif(menuButtonInfo.value){\r\n\t\tstyle={\r\n\t\t\theight:`${menuButtonInfo.value.top+menuButtonInfo.value.height+20}px`\r\n\t\t}\r\n\t}\r\n\r\n\t\r\n\r\n\r\n\r\n\r\n\r\n\treturn style\r\n})\r\nconst navStyle=computed(()=>{\r\n\tlet style={\r\n\t\ttop:\"0\",\r\n\t\theight:\"44px\"\r\n\t}\r\n\r\n\tif(menuButtonInfo.value){\r\n\t\tstyle={\r\n\t\t\ttop:`${menuButtonInfo.value.top}px`,\r\n\t\t\theight:`${menuButtonInfo.value.height}px`\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\treturn style\r\n})\r\n\r\n//地理信息定位\r\nconst cityName=ref<string>(\"\");\r\nconst startLocation=()=>{\r\n\tuni.__f__('log','at pages/index/index.vue:89',\"开始定位\")\r\n\tuni.getLocation({\r\n\t\ttype:\"wgs84\",\r\n\t\tgeocode:true,\r\n\t\tsuccess(res){\r\n\t\t\tuni.__f__('log','at pages/index/index.vue:94',\"获取地理位置成功\")\r\n\t\t\tuni.__f__('log','at pages/index/index.vue:95',\"经度是\",res.longitude)\r\n\t\t\tuni.__f__('log','at pages/index/index.vue:96',\"纬度是\",res.latitude)\r\n\t\t\treverseCode(res.longitude,res.latitude).then(res=>{\r\n\t\t\t\tcityName.value=res\r\n\t\t\t}).catch(()=>{\r\n\t\t\t\tcityName.value=\"无法定位\"\r\n\t\t\t})\r\n\t\t},\r\n\t\tfail(){\r\n\t\t\tcityName.value=\"无法获取位置\";\r\n\t\t\tuni.__f__('log','at pages/index/index.vue:105',\"获取地理位置失败\")\r\n\t\t\tuni.showModal({\r\n\t\t\t\ttitle:\"提示\",\r\n\t\t\t\tcontent:\"需要获取您的位置信息，是否去设置开启定位权限\",\r\n\t\t\t\tsuccess(res) {\r\n\t\t\t\t\tif(res.confirm){\r\n\r\n\t\t\t\t\t\tuni.openSetting({\r\n\t\t\t\t\t\t\tsuccess(settings){\r\n\t\t\t\t\t\t\t\tuni.__f__('log','at pages/index/index.vue:114',\"设置页面\",settings)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t})\r\n}\r\n\r\n//获取轮播图\r\nconst getBannerList=async ()=>{\r\n\tconst data=await get(\"/home/banner\");\r\n\tuni.__f__('log','at pages/index/index.vue:145',\"轮播图数据\",data)\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\"scoped>\r\n.container{\r\n\tbackground-color: #f7f7f7;\r\n\t.header{\r\n\t\tbackground-color:$uni-color-primary;\r\n\t\t.status-bar{\r\n\t\t\twidth: 100%;\r\n\t\t\theight: var(--status-bar-height);\r\n\t\t}\r\n\t\t.nav-content{\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 0 30rpx;\r\n\t\t\tposition: fixed;\r\n\t\t\tleft: 0;\r\n\t\t\tright:0;\r\n\t\t\t.location{\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-right: 10rpx;\r\n\t\t\t\t.city{\r\n\t\t\t\t\tcolor: #fff;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\twidth: 120rpx;\r\n\t\t\t\t\twhite-space: nowrap;\r\n\t\t\t\t\toverflow: hidden;\r\n\t\t\t\t\ttext-overflow: ellipsis;\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t.search-box{\r\n\t\t\t\twidth: 360rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n</style>\r\n","import MiniProgramPage from 'D:/溜溜爪宠物小程序/pet-app/liuliuzhua/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"mappings":"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","ignoreList":[]}