{"version":3,"file":"order.js","sources":["order.vue","cGFja2FnZUJcb3JkZXJcb3JkZXIudnVl"],"sourcesContent":["<template>\r\n\t<view class=\"order-create\">\r\n\t\t<!--收货地址-->\r\n\t\t<view class=\"address-section\" @click=\"chooseAddress\">\r\n\t\t\t<view class=\"address-content\" v-if=\"address.name\">\r\n\t\t\t\t<view class=\"user-info\">\r\n\t\t\t\t\t<text class=\"name\">{{address.name}}</text>\r\n\t\t\t\t\t<text class=\"phone\">{{address.phone}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"address-detail\">{{address.province}}{{address.city}}{{address.district}}{{address.detail}}\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"no-address\" v-else>\r\n\t\t\t\t<text>请选择收货地址</text>\r\n\t\t\t</view>\r\n\t\t\t<up-icon name=\"arrow-right\" size=\"24\" color=\"#999\"></up-icon>\r\n\t\t</view>\r\n\r\n\t\t<!--商品列表-->\r\n\t\t<view class=\"goods-section\">\r\n\t\t\t<view class=\"section-title\">商品信息</view>\r\n\t\t\t<view class=\"goods-list\">\r\n\t\t\t\t<view class=\"goods-item\" v-for=\"item in selPro\" :key=\"item.product_id\">\r\n\t\t\t\t\t<image class=\"goods-img\" :src=\"item.main_pic\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\"goods-info\">\r\n\t\t\t\t\t\t<view class=\"goods-name\">{{item.name}}</view>\r\n\t\t\t\t\t\t<view class=\"goods-spec\">{{item.spec}}</view>\r\n\t\t\t\t\t\t<view class=\"price-quantity\">\r\n\t\t\t\t\t\t\t<text class=\"price\">￥{{item.price}}</text>\r\n\t\t\t\t\t\t\t<text class=\"quantity\">×{{item.count}}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!--配送方式-->\r\n\t\t<view class=\"delivery-section\">\r\n\t\t\t<view class=\"section-title\">配送方式</view>\r\n\t\t\t<view class=\"delivery-options\">\r\n\t\t\t\t<view class=\"delivery-item\">\r\n\t\t\t\t\t<text>快递配送</text>\r\n\t\t\t\t\t<text class=\"delivery-free\">免运费</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t\t<!--订单备注-->\r\n\t\t<view class=\"remark-section\">\r\n\t\t\t<view class=\"section-title\">订单备注</view>\r\n\t\t\t<input class=\"remark-input\" placeholder=\"请输入备注信息(选填)\" />\r\n\t\t</view>\r\n\r\n\t\t<!--金额明细-->\r\n\t\t<view class=\"amount-section\">\r\n\t\t\t<view class=\"amount-item\">\r\n\t\t\t\t<text>商品金额</text>\r\n\t\t\t\t<text>￥{{totalPrice}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"amount-item\">\r\n\t\t\t\t<text>运费</text>\r\n\t\t\t\t<text>￥0.00</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"amount-item total\">\r\n\t\t\t\t<text>实付金额</text>\r\n\t\t\t\t<text class=\"price\">￥{{totalPrice}}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!--底部结算-->\r\n\t\t<view class=\"settlement-bar\">\r\n\t\t\t<view class=\"total-info\">\r\n\t\t\t\t<text>合计：</text>\r\n\t\t\t\t<text class=\"price\">￥{{totalPrice}}</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"submit-btn\">立即支付</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\n\timport { computed, ref } from \"vue\"\r\n\timport { get } from \"../../utils/http\"\r\n\timport { onLoad } from \"@dcloudio/uni-app\"\r\n\tinterface AddressItem {\r\n\t\tcity : string;\r\n\t\tdetail : string;\r\n\t\tdistrict : string;\r\n\t\tid : number;\r\n\t\tis_default : 1 | 0;\r\n\t\tname : string;\r\n\t\tphone : string;\r\n\t\tprovince : string;\r\n\t\tuser_id : number\r\n\t}\r\n\tinterface cartItem {\r\n\t\tcart_id ?: number;\r\n\t\tcount : number;\r\n\t\tmain_pic : string;\r\n\t\tname : string;\r\n\t\tprice : string;\r\n\t\tproduct_id : number;\r\n\t\tspec : string;\r\n\t\tuser_id : number\r\n\t\tselected ?: boolean\r\n\t}\r\n\tonLoad((options) => {\r\n\t\tgetAddress()\r\n\t\tselPro.value = JSON.parse(options.selPro)\r\n\t\tuni.$on(\"addressSelected\", (selectedAddress) => {\r\n\t\t\tuni.__f__('log','at packageB/order/order.vue:111',\"选中的地址是\", selectedAddress)\r\n\t\t\taddress.value = selectedAddress //更新页面中显示的地址信息\r\n\t\t})\r\n\t})\r\n\t//地址管理\r\n\tconst address = ref<AddressItem>({} as AddressItem)\r\n\tconst getAddress = async () => {\r\n\t\ttry {\r\n\t\t\tconst result : any = await get(\"/cart/address\");\r\n\t\t\taddress.value = result.filter(item => item.is_default)[0]\r\n\t\t} catch (error) {\r\n\t\t\tuni.__f__('log','at packageB/order/order.vue:122',error)\r\n\t\t}\r\n\t}\r\n\tconst chooseAddress = () => {\r\n\t\tuni.navigateTo({\r\n\t\t\turl: \"/packageB/address/address?flag=1\"\r\n\t\t})\r\n\t}\r\n\t//商品信息\r\n\tconst selPro = ref<cartItem[]>([])\r\n\t//计算总价\r\n\tconst totalPrice = computed<number>(() => {\r\n\t\tlet total = 0;\r\n\t\tselPro.value.forEach(item => {\r\n\t\t\ttotal += Number(item.price)\r\n\t\t})\r\n\t\treturn total\r\n\t})\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n\t.order-create {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tpadding-bottom: 120rpx;\r\n\r\n\t\t.address-section {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t.address-content {\r\n\t\t\t\tflex: 1;\r\n\r\n\t\t\t\t.user-info {\r\n\t\t\t\t\tmargin-bottom: 10rpx;\r\n\r\n\t\t\t\t\t.name {\r\n\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.phone {\r\n\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\tcolor: #666;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.address-detail {\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #666;\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.no-address {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.goods-section {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t.section-title {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t}\r\n\r\n\t\t\t.goods-list {\r\n\t\t\t\t.goods-item {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tmargin-bottom: 30rpx;\r\n\r\n\t\t\t\t\t.goods-img {\r\n\t\t\t\t\t\twidth: 160rpx;\r\n\t\t\t\t\t\theight: 160rpx;\r\n\t\t\t\t\t\tborder-radius: 12rpx;\r\n\t\t\t\t\t\tmargin-right: 20rpx;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t.goods-info {\r\n\t\t\t\t\t\tflex: 1;\r\n\r\n\t\t\t\t\t\t.goods-name {\r\n\t\t\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\t\t\tmargin-bottom: 10rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.goods-spec {\r\n\t\t\t\t\t\t\tfont-size: 24rpx;\r\n\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t.price-quantity {\r\n\t\t\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\t\t\talign-items: center;\r\n\r\n\t\t\t\t\t\t\t.price {\r\n\t\t\t\t\t\t\t\tcolor: #ff4d4f;\r\n\t\t\t\t\t\t\t\tfont-size: 32rpx;\r\n\t\t\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t.quantity {\r\n\t\t\t\t\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.delivery-section {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t.section-title {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.delivery-options {\r\n\t\t\t\t.delivery-item {\r\n\t\t\t\t\tdisplay: flex;\r\n\t\t\t\t\tjustify-content: space-between;\r\n\t\t\t\t\talign-items: center;\r\n\t\t\t\t\tpadding: 20rpx 0;\r\n\t\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\r\n\t\t\t\t\t.delivery-free {\r\n\t\t\t\t\t\tcolor: #999;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.remark-section {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t.section-title {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.remark-input {\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #333;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.amount-section {\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tpadding: 30rpx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\r\n\t\t\t.amount-item {\r\n\t\t\t\tdisplay: flex;\r\n\t\t\t\tjustify-content: space-between;\r\n\t\t\t\talign-items: center;\r\n\t\t\t\tmargin-bottom: 20rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #666;\r\n\r\n\t\t\t\t&.total {\r\n\t\t\t\t\tborder-top: 2rpx solid #f5f5f5;\r\n\t\t\t\t\tmargin-top: 20rpx;\r\n\t\t\t\t\tpadding-top: 20rpx;\r\n\t\t\t\t\tcolor: #333;\r\n\t\t\t\t\tfont-size: 30rpx;\r\n\r\n\t\t\t\t\t.price {\r\n\t\t\t\t\t\tcolor: #ff4d4f;\r\n\t\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t.settlement-bar {\r\n\t\t\tposition: fixed;\r\n\t\t\tbottom: 0;\r\n\t\t\tleft: 0;\r\n\t\t\tright: 0;\r\n\t\t\theight: 100rpx;\r\n\t\t\tpadding: 20rpx;\r\n\t\t\tbackground-color: #fff;\r\n\t\t\tdisplay: flex;\r\n\t\t\talign-items: center;\r\n\t\t\tbox-shadow: 0 -2rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\r\n\t\t\t.total-info {\r\n\t\t\t\tflex: 1;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t\tcolor: #333;\r\n\r\n\t\t\t\t.price {\r\n\t\t\t\t\tcolor: #ff4d4f;\r\n\t\t\t\t\tfont-size: 36rpx;\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.submit-btn {\r\n\t\t\t\twidth: 240rpx;\r\n\t\t\t\theight: 80rpx;\r\n\t\t\t\tbackground-color: #ffce2c;\r\n\t\t\t\tcolor: #fff;\r\n\t\t\t\tborder-radius: 40rpx;\r\n\t\t\t\ttext-align: center;\r\n\t\t\t\tline-height: 80rpx;\r\n\t\t\t\tfont-size: 28rpx;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</style>","import MiniProgramPage from 'D:/溜溜爪宠物小程序/pet-app/liuliuzhua/packageB/order/order.vue'\nwx.createPage(MiniProgramPage)"],"names":["onLoad","uni","ref","get","computed"],"mappings":";;;;;;;;;;;;;;;AA0GCA,kBAAA,OAAO,CAAC,YAAY;AACR;AACX,aAAO,QAAQ,KAAK,MAAM,QAAQ,MAAM;AACpCC,oBAAAA,MAAA,IAAI,mBAAmB,CAAC,oBAAoB;AAC/CA,sBAAA,MAAI,MAAM,OAAM,mCAAkC,UAAU,eAAe;AAC3E,gBAAQ,QAAQ;AAAA,MAAA,CAChB;AAAA,IAAA,CACD;AAEK,UAAA,UAAUC,kBAAiB,CAAA,CAAiB;AAClD,UAAM,aAAa,YAAY;AAC1B,UAAA;AACG,cAAA,SAAe,MAAMC,qBAAI,eAAe;AAC9C,gBAAQ,QAAQ,OAAO,OAAO,UAAQ,KAAK,UAAU,EAAE,CAAC;AAAA,eAChD,OAAO;AACXF,sBAAAA,MAAA,MAAM,OAAM,mCAAkC,KAAK;AAAA,MACxD;AAAA,IAAA;AAED,UAAM,gBAAgB,MAAM;AAC3BA,oBAAAA,MAAI,WAAW;AAAA,QACd,KAAK;AAAA,MAAA,CACL;AAAA,IAAA;AAGI,UAAA,SAASC,kBAAgB,CAAA,CAAE;AAE3B,UAAA,aAAaE,cAAAA,SAAiB,MAAM;AACzC,UAAI,QAAQ;AACL,aAAA,MAAM,QAAQ,CAAQ,SAAA;AACnB,iBAAA,OAAO,KAAK,KAAK;AAAA,MAAA,CAC1B;AACM,aAAA;AAAA,IAAA,CACP;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzIF,GAAG,WAAW,eAAe;"}